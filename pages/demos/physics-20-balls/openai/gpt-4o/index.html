<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Simulation in a Spinning Hexagon</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const hexagonRadius = 200;
        const ballCount = 20;
        const balls = [];
        let gravity = 0.1;
        let gravityDirection = 1;
        let angle = 0;

        class Ball {
            constructor(x, y, radius) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.vx = Math.random() * 2 - 1;
                this.vy = Math.random() * 2 - 1;
            }

            update() {
                this.vy += gravity * gravityDirection;
                this.x += this.vx;
                this.y += this.vy;

                // Collision detection with hexagon walls
                if (this.y + this.radius > centerY + hexagonRadius || this.y - this.radius < centerY - hexagonRadius) {
                    this.vy *= -1;
                }
                if (this.x + this.radius > centerX + hexagonRadius || this.x - this.radius < centerX - hexagonRadius) {
                    this.vx *= -1;
                }
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'blue';
                ctx.fill();
                ctx.closePath();
            }
        }

        function createBalls() {
            for (let i = 0; i < ballCount; i++) {
                const ball = new Ball(centerX, centerY, 10);
                balls.push(ball);
            }
        }

        function drawHexagon(x, y, radius, angle) {
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const theta = ((Math.PI / 3) * i) + angle;
                const px = x + radius * Math.cos(theta);
                const py = y + radius * Math.sin(theta);
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.closePath();
            ctx.strokeStyle = 'black';
            ctx.stroke();
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            angle += 0.01;
            drawHexagon(centerX, centerY, hexagonRadius, angle);

            balls.forEach(ball => {
                ball.update();
                ball.draw();
            });

            requestAnimationFrame(update);
        }

        function changeGravity() {
            gravityDirection *= -1;
            setTimeout(changeGravity, 5000);
        }

        createBalls();
        update();
        changeGravity();
    </script>
</body>
</html>